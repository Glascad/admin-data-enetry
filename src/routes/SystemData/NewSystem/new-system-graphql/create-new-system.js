import gql from 'graphql-tag';

export default {
    mutation: gql`mutation createnewsystem(
        $name:String!,
        $manufacturerid:Int,
        $systemtypeid:Int,
        $depth:Float,
        $defaultsightline:Float,
        $shimsize:Float,
        $defaultglasssize:Float,
        $defaultglassbite:Float,
        $systemtags:[Int]
    ){
        createnewsystem(
            input:{
                system:{
                    name:$name,
                    manufacturerid:$manufacturerid,
                    systemtypeid:$systemtypeid,
                    depth:$depth,
                    defaultsightline:$defaultsightline,
                    shimsize:$shimsize,
                    defaultglasssize:$defaultglasssize,
                    defaultglassbite:$defaultglassbite,
                    systemtags:$systemtags
                }
            }
        ){
            system{
                nodeId
                id
                name
                depth
                defaultSightline
                shimSize
                defaultGlassSize
                defaultGlassBite
                manufacturerId
                systemTypeId
                manufacturerByManufacturerId{
                    nodeId
                    id
                    name
                }
                systemTypeBySystemTypeId{
                    nodeId
                    id
                    type
                }
                systemSystemTagsBySystemId{
                    nodes{
                        nodeId
                        systemTagBySystemTagId{
                            nodeId
                            id
                            tag
                        }
                    }
                }
            }
        }
    }`,
    mapResultToProps: (newSystem, { system }) => ({
        system: {
            ...system,
            ...newSystem,
        }
    })
};
